import{j as e}from"./index-BOx0IGA4.js";import{r as p}from"./redux-vendor-BLK8OarT.js";import"./react-vendor-lrMwpTwJ.js";const y="https://api.github.com",h="rifatahsanpul0k",v=60*60*1e3,E=s=>s?Date.now()-s<v:!1,x=s=>{try{const t=localStorage.getItem(s);if(!t)return null;const{data:a,timestamp:i}=JSON.parse(t);return E(i)?a:(localStorage.removeItem(s),null)}catch(t){return console.error("Cache read error:",t),null}},f=(s,t)=>{try{localStorage.setItem(s,JSON.stringify({data:t,timestamp:Date.now()}))}catch(a){console.error("Cache write error:",a)}},N=async s=>{try{const t=await fetch(`${y}${s}`);if(!t.ok)throw new Error(`GitHub API error: ${t.status}`);return await t.json()}catch(t){throw console.error("GitHub API fetch error:",t),t}},I=async()=>{const s=`github_profile_${h}`,t=x(s);if(t)return t;const a=await N(`/users/${h}`);return f(s,a),a},w=async(s=6,t="updated")=>{const a=`github_repos_${h}_${t}_${s}`,i=x(a);if(i)return i;const r=await N(`/users/${h}/repos?sort=${t}&per_page=${s}&type=owner`);return f(a,r),r},S=async(s=10)=>{const t=`github_events_${h}_${s}`,a=x(t);if(a)return a;const i=await N(`/users/${h}/events/public?per_page=${s}`);return f(t,i),i},$=s=>{var o,n,l,d,_;const t=s.type,a=s.repo.name,i=new Date(s.created_at);let r="",c="";switch(t){case"PushEvent":const m=((o=s.payload.commits)==null?void 0:o.length)||0;r=`Pushed ${m} commit${m>1?"s":""}`,c=((l=(n=s.payload.commits)==null?void 0:n[0])==null?void 0:l.message)||"";break;case"CreateEvent":r=`Created ${s.payload.ref_type}`,c=s.payload.ref||a;break;case"PullRequestEvent":r=`${s.payload.action} pull request`,c=((d=s.payload.pull_request)==null?void 0:d.title)||"";break;case"IssuesEvent":r=`${s.payload.action} issue`,c=((_=s.payload.issue)==null?void 0:_.title)||"";break;case"WatchEvent":r="Starred",c=a;break;case"ForkEvent":r="Forked",c=a;break;default:r=t.replace("Event",""),c=a}return{id:s.id,type:t,action:r,details:c,repo:a,createdAt:i,timeAgo:A(i)}},A=s=>{const t=Math.floor((new Date-s)/1e3),a={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60};for(const[i,r]of Object.entries(a)){const c=Math.floor(t/r);if(c>=1)return`${c} ${i}${c>1?"s":""} ago`}return"just now"},T=()=>{const[s,t]=p.useState(null),[a,i]=p.useState(!0),[r,c]=p.useState(null);return p.useEffect(()=>{(async()=>{try{i(!0);const n=await I();t(n),c(null)}catch(n){c(n.message),console.error("Error fetching GitHub profile:",n)}finally{i(!1)}})()},[]),{profile:s,loading:a,error:r}},R=(s=6,t="updated")=>{const[a,i]=p.useState([]),[r,c]=p.useState(!0),[o,n]=p.useState(null);return p.useEffect(()=>{(async()=>{try{c(!0);const d=await w(s,t);i(d),n(null)}catch(d){n(d.message),console.error("Error fetching GitHub repos:",d)}finally{c(!1)}})()},[s,t]),{repos:a,loading:r,error:o}},U=(s=10)=>{const[t,a]=p.useState([]),[i,r]=p.useState(!0),[c,o]=p.useState(null);return p.useEffect(()=>{(async()=>{try{r(!0);const l=await S(s);a(l),o(null)}catch(l){o(l.message),console.error("Error fetching GitHub events:",l)}finally{r(!1)}})()},[s]),{events:t,loading:i,error:c}},k=({profile:s})=>{if(!s)return null;const{avatar_url:t,name:a,bio:i,public_repos:r,followers:c,following:o,location:n,html_url:l}=s;return e.jsx("div",{className:"profile-stats border-b",children:e.jsxs("div",{className:"profile-stats__container",children:[e.jsxs("div",{className:"profile-stats__main",children:[e.jsx("img",{src:t,alt:a||"GitHub Avatar",className:"profile-stats__avatar"}),e.jsxs("div",{className:"profile-stats__info",children:[e.jsx("h2",{className:"profile-stats__name text-h1",children:a}),e.jsx("p",{className:"profile-stats__bio text-body text-gray-dark",children:i}),n&&e.jsxs("div",{className:"profile-stats__location",children:[e.jsx("span",{className:"material-icons",children:"location_on"}),e.jsx("span",{className:"text-caption",children:n})]})]})]}),e.jsxs("div",{className:"profile-stats__numbers",children:[e.jsxs("div",{className:"profile-stats__stat",children:[e.jsx("span",{className:"profile-stats__stat-value text-display-small",children:r}),e.jsx("span",{className:"profile-stats__stat-label text-caption",children:"REPOSITORIES"})]}),e.jsxs("div",{className:"profile-stats__stat border-l",children:[e.jsx("span",{className:"profile-stats__stat-value text-display-small",children:c}),e.jsx("span",{className:"profile-stats__stat-label text-caption",children:"FOLLOWERS"})]}),e.jsxs("div",{className:"profile-stats__stat border-l",children:[e.jsx("span",{className:"profile-stats__stat-value text-display-small",children:o}),e.jsx("span",{className:"profile-stats__stat-label text-caption",children:"FOLLOWING"})]})]}),e.jsxs("a",{href:l,target:"_blank",rel:"noopener noreferrer",className:"profile-stats__link",children:[e.jsx("span",{className:"text-caption",children:"VIEW_FULL_PROFILE"}),e.jsx("span",{className:"material-icons",children:"arrow_forward"})]})]})})},G=({repo:s})=>{const{name:t,description:a,html_url:i,stargazers_count:r,forks_count:c,language:o,updated_at:n}=s,l=d=>{const _=new Date(d),m=Math.floor((new Date-_)/1e3),j={month:2592e3,week:604800,day:86400,hour:3600,minute:60};for(const[g,b]of Object.entries(j)){const u=Math.floor(m/b);if(u>=1)return`Updated ${u} ${g}${u>1?"s":""} ago`}return"Updated recently"};return e.jsx("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"repo-card border",children:e.jsxs("div",{className:"repo-card__content",children:[e.jsxs("div",{className:"repo-card__header",children:[e.jsx("span",{className:"material-icons repo-card__icon",children:"folder"}),e.jsx("h3",{className:"repo-card__name text-h3",children:t})]}),e.jsx("p",{className:"repo-card__description text-body",children:a||"No description available"}),e.jsxs("div",{className:"repo-card__stats",children:[o&&e.jsxs("div",{className:"repo-card__stat",children:[e.jsx("span",{className:"repo-card__stat-dot"}),e.jsx("span",{className:"text-caption",children:o})]}),r>0&&e.jsxs("div",{className:"repo-card__stat",children:[e.jsx("span",{className:"material-icons repo-card__stat-icon",children:"star"}),e.jsx("span",{className:"text-caption",children:r})]}),c>0&&e.jsxs("div",{className:"repo-card__stat",children:[e.jsx("span",{className:"material-icons repo-card__stat-icon",children:"fork_right"}),e.jsx("span",{className:"text-caption",children:c})]})]}),e.jsx("div",{className:"repo-card__footer",children:e.jsx("span",{className:"text-caption text-gray",children:l(n)})})]})})},H=({events:s})=>{if(!s||s.length===0)return e.jsx("div",{className:"activity-feed",children:e.jsx("p",{className:"text-body text-gray",children:"No recent activity"})});const t=s.slice(0,8).map($);return e.jsxs("div",{className:"activity-feed",children:[e.jsxs("div",{className:"activity-feed__header",children:[e.jsx("span",{className:"text-caption",children:"RECENT_ACTIVITY"}),e.jsx("span",{className:"text-caption text-gray",children:"LAST_8_EVENTS"})]}),e.jsx("div",{className:"activity-feed__list",children:t.map(a=>e.jsxs("div",{className:"activity-feed__item border-b",children:[e.jsx("div",{className:"activity-feed__icon",children:e.jsx("span",{className:"material-icons",children:L(a.type)})}),e.jsxs("div",{className:"activity-feed__content",children:[e.jsxs("div",{className:"activity-feed__action",children:[e.jsx("span",{className:"text-caption",children:a.action}),e.jsxs("span",{className:"text-caption text-gray",children:["â€¢ ",a.timeAgo]})]}),a.details&&e.jsx("p",{className:"activity-feed__details text-body",children:a.details}),e.jsx("span",{className:"activity-feed__repo text-caption text-gray",children:a.repo})]})]},a.id))})]})},L=s=>({PushEvent:"upload",CreateEvent:"add_circle",PullRequestEvent:"merge",IssuesEvent:"error_outline",WatchEvent:"star",ForkEvent:"fork_right",DeleteEvent:"delete"})[s]||"code",F=()=>{const{profile:s,loading:t,error:a}=T(),{repos:i,loading:r,error:c}=R(6,"updated"),{events:o,loading:n,error:l}=U(10);return e.jsxs("section",{className:"github-section border-b",id:"github",children:[e.jsx("div",{className:"github-section__main-header border-b",children:e.jsxs("div",{className:"github-section__main-header-content",children:[e.jsx("span",{className:"github-section__main-title text-display-small",children:"GITHUB"}),e.jsx("span",{className:"text-caption text-gray",children:"LIVE_DATA_FROM_GITHUB_API"})]})}),t?e.jsx("div",{className:"github-section__loading",children:e.jsx("span",{className:"text-body",children:"Loading GitHub profile..."})}):a?e.jsx("div",{className:"github-section__error",children:e.jsx("span",{className:"text-body",children:"Unable to load GitHub profile"})}):e.jsx(k,{profile:s}),e.jsxs("div",{className:"github-section__container",children:[e.jsxs("div",{className:"github-section__header border-b",children:[e.jsx("span",{className:"text-caption github-section__title",children:"GITHUB_LIVE // RECENT_REPOSITORIES"}),e.jsx("span",{className:"text-caption text-gray",children:"AUTO_UPDATED"})]}),r?e.jsx("div",{className:"github-section__loading-grid",children:e.jsx("span",{className:"text-body text-gray",children:"Fetching repositories..."})}):c?e.jsx("div",{className:"github-section__error-grid",children:e.jsx("span",{className:"text-body",children:"Unable to load repositories"})}):e.jsx("div",{className:"github-section__repos-grid",children:i.map(d=>e.jsx(G,{repo:d},d.id))}),e.jsx("div",{className:"github-section__activity border-t",children:e.jsx("div",{className:"github-section__activity-content",children:n?e.jsx("span",{className:"text-body text-gray",children:"Loading activity..."}):l?e.jsx("span",{className:"text-body",children:"Unable to load activity"}):e.jsx(H,{events:o})})})]})]})};export{F as default};
